# Blockchain
## 1. Blockchain là gì?

   Định nghĩa đơn giản, Blockchain là một loại dữ liệu, hay một cách lưu trữ những hồ sơ giao dịch và giá trị.

   Blockchain là một loại dữ liệu mới cũng như nói thư điện tử là cách mới để gửi thư cho người khác. 

   Mặc dù thế, định nghĩa đơn giản này nhằm giúp cho mọi người hiểu khái quát về bản thân nó, những lại không diễn tả được đặc tính thật sự nằm trong cách thức lưu trữ các hồ sơ giá trị, giao dịch.

   Trong quá khứ, mọi tài sản có giá trị hay các hoạt động giao dịch, đều dựa vào người thứ 3 như ngân hàng, chính phủ. Ví dụ như khi thanh toán giao dịch qua thẻ, người ta tin tưởng rằng công ty phát hành thẻ tín dụng và ngân hàng sẽ chuyển khoản tiền tới tài khoản người bán, còn người bán sẽ tin tưởng rằng công ty phát hành thẻ sẽ thanh toán tiền cho họ và khi xảy ra tranh chấp, bên này sẽ đứng ra giải quyết cho họ.

   Blockchain sinh ra là để xóa nhòa sự lệ thuộc vào bên thứ 3, và phòng trường hợp bên thứ 3 sụp đổ. Cơ sở dữ liệu trung tâm được xây dựng trên Blockchain, loại bỏ sự cần thiết của các CSDL và các tổ chức trung tâm. Mọi các nhân trong Blockchain có thể quan sát, kiểm tra giao dịch đảm bảo tính minh bạch và độ tin cậy.Công nghệ này tạo lên hệ thống tín nhiệm giữa các cá nhân mà không cần một tổ chức liên quan nào cả.

   Blockchain cho phép mọi người giao dịch mọi giá trị, như: Tài liệu điện tử, cổ phần, bất động sản, sách,...


## 2. Blockchain hoạt động như thế nào?

Blockchain, như tên gọi của nó, được tạo lên từ một chuỗi các khối. Các khối này sẽ lữu trữ giá trị, các giao dịch tại thời điểm đó. Khi một khối mới được tạo ra, nó được thêm vào phía sau của khối trước nó bằng cách thêm chỉ dẫn đến khối trước đó, liên kết chúng với nhau. Ví dụ khối 6 liên kết với khối 5, khối 5 liên kết với khối 3,...Các Blockchain liên lết với nhau, ngược trở lại khối đầu tiên, khối này là khối nguyên thủy.

Các khối được thêm vào chuỗi sẽ không thể bị can thiệp hay sửa đổi, các khối sẽ được bổ sung vĩnh viễn vào Blockchain. Vì mỗi khối liên kết với khối đằng sau và đằng trước nó, nếu ai đó muốn thay đổi giao dịch, phải thay đổi khối trước và sau nó. Như mạng lưới Bitcoin, ước tính rằng sau 6 khối được bổ sung sau 1 khối, sẽ không thể thay đổi được bất kì giao dịch nào trong khối đó. 

Khai thác là quá trình kiểm nhận giao dịch và đưa vào khối mới trong BLockchain. Những phần thưởng nhỏ sẽ được trao tặng, khi mỗi khối mới được thêm vào chuỗi.

Với Blockchain đồng thuận, Vì tại mỗi khối không chỉ lưu trữ giá trị mà còn lưu trữ giao dịch, thế nên để một khối được thêm vào chuỗi thì khối này phải nhận được sự đồng thuận của mọi thành viên trong mạng lưới. Cũng như khi có một giao dịch, phải có sự đồng thuận của đại đã số thành viện trong mạng lưới thì giao dịch mới được diễn ra, đây được gọi là "đồng thuận phân tán". Đối với nhiều Blockchain, ngưỡng đồng thuận là trên 50%, nếu có trên 50% thành viên công nhận giao dịch hợp lệ thì giao dịch này sẽ được công nhận hợp lệ. 

Đây chính là cách thức thông thường mà Blockchain hoạt động để công nhận các giao dịch và quản lí mạng lưới. Thay vì một bộ phận chịu trách nhiệm công nhận toàn bộ các giao dịch và duy trì độ chính xác của CSDL thì nhiệm vụ này được chia sẻ cho cả mạng lưới. 
   

    
## 3. Blockchain và Bitcoin

Blockchain và Bitcoin là 2 thứ hoàn toàn khác nhau. Blockchain là một trong những công nghệ cơ sở tạo lên Bitcoin. Blockchain đầu tiên hình thành khi Bitcoin được tạo ra. Những không phải Blockchain là công nghệ duy nhất tạo lên Bitcoin, Bitcoin được tạo lên bằng việc sử dụng một chuỗi các công nghệ mất mã kết hợp với Blockchain.

Bitcoin là đồng tiền ảo, được tạo bởi Satoshi Nakamoto vào năm 2009, chủ yếu được dùng để thanh toán. Trong khi Blockchain có thể lưu trữ và chuyển giao mọi giá trị.


## 4. Ethereum, hợp đồng thông minh và các ứng dụng phi tập trung

Ethereum là một Blockchain với ngôn ngữ lập trình cho phép các ứng dụng hoạt động trên Blockchain. Mạng lưới Ethereum sử dụng đồng tiền ảo "Ether" hoạt động như tiền tệ của mạng lưới. Ether được sử dụng như một cách thức chi trả cho việc vận hành các ứng dụng phi tập trung trên mạng lưới. Đây là đồng tiền ảo lớn thứ 2 thế giới, chỉ sau Bitcoin.

- Ethereum và Bitcoin

Điểm khác biệt chính giữa 2 đối tượng này là: Bitcoin được sử dụng chủ yếu như một sổ cái phân tán cho các giao dịch tài chính. Trong khi Ethereum, được thiết kế để sử dụng như một nền tảng điện toán phân tán để vận hành các ứng dung.

Cụ thể là:

Bitcoin được sử dụng để thanh toán hàng hóa tại bất cứ nơi nào đồng tiền này được chấp nhân. Trong khi đồng tiền ảo Ether của mạng lưới Ethereum được thiết kế cho các lập trình viên sử dụng để chi trả cho công suất tính toán trên mạng lưới khi vận hành các ứng dụng phi tập trung. Tóm lại 2 đồng tiền ảo này khác nhau về mục đích sử dụng. Ether chỉ là một phần nhỏ của một mạng lưới khi mà Ethereum còn sở hữu một nền tảng điện toán toàn diện ngoài công nghệ Blockchain.

- Lợi ích của Ethereum

Các ứng dụng trên mạng lưới Ethereum có thể được vận hành một cách mạnh mẽ, trơn tru do mạng Blockchain Ethereum được vận hành bởi hàng ngàn máy tính trên toàn thế giới với công suất tính toán đồ sộ.

Các lập trình viên không cần tự tạo Blockchain riêng của họ, bởi Ethereum đã xây dựng mạng lưới các máy tính trên Blockchain Ethereum.

Nền tảng Ethereum này còn sở hữu máy ảo Ethereum và ngôn ngữ lập trình SOlidity, ngôn ngữ được sử dụng để tạo ra các ứng dụng phi tập trung hoặc các hợp đồng thông minh mà sau đó được máy ảo Ethereum thông dịch và vận hành trên Blockchain.

- Một ứng dụng lớn của Ethereum chính là hợp đồng thông minh

HĐTM là các hợp đồng được viết bằng mã máy tính và vận hành trên một Blockchain hoặc sổ cái phân tán. Các hợp đồng này sẽ tự động xác thực, sử lí, và bắt buộc thực hiện hợp đồng dựa trên mã mà không cần đến bên thứ ba giữ vai trò như các luật sư để ép buộc thực hiện hợp đồng.

Nền tảng Ethereum là tương lai của công nghệ Blockchain bao gồm HĐTM và các ứng dụng phi tập trung, mà được biết đến là "Blockchain 2.0"
## 4. Lợi ích của công nghệ Blockchain

- Lược bỏ các đơn vị trung gian
- tính minh bạch
- Độ bảo mật
- Tiềm năng ứng dụng rộng
- Tiết kiệm chi phí (do loại bỏ các thành phần trung gian)
...
## 5. Rủi ro khi sử dụng công nghệ Blockchain

- Thiếu tính riêng tư
- Công nghệ chưa được công nhận đông đảo, kiểm chứng
- Chi phí ( Cần lượng điện năng lớn cho vận hành )
- Sự thiếu hiểu biết về công nghệ Blockchain
...
## 6. Hướng dẫn kĩ thuật về Blọckchain

Phần này sẽ trình bày về cách thức hoạt động của Blockchain, mà cụ thể ở đây là Blockchain Bitcoin, vì đây là Blockchain nguyên bản mà tất cả các Blockchain khác đều được xây dựng dựa trên nền tảng này, cũng sẽ hoạt động theo cách tương tự.

Blockchain Bitcoin sử dụng thuật toán SHA-256 để sinh ra các mã băm ổn định và duy nhất. Mục đích của việc băm này như đã nói ở những phần trên nhằm ẩn dấu dữ liệu theo cách gần như không thể mã hóa nếu không được cấp quyền. Mã băm được tạo ra luôn có cùng độ dài bất kể dữ liệu đầu vào dài hay ngắn. Nếu thay đổi dù chỉ một kí tự thì mã băm cũng sẽ thay đổi hoàn toàn.

- Giao dịch băm trong Blockchain:

Mã băm sau khi đã được sinh ra sẽ được liên kết vào các Blockchain, dưới đây sẽ là ví dụ cụ thể:

Khối đầu tiên trong Blockchain là khối 0, hay Khối nguyên thủy, ví dụ khối đầu tiên này chứa khối giao dịch với nội dung:

Khối 0:

"A nhận 6 bitcoin, B nhận 5 bitcoin, C nhận 9 bitcoin"

Nội dung này sẽ có mã băm, Mã băm 0 = 0000641727781545e50c0235823c9ae0785d419499cc5a5dcdff2332a53f0f7f

Khối 1:

Với nội dung:

"A gửi B 5 bitcoin, B gửi C 3 bitcoin"

Mỗi giao dịch trong khối sẽ được chủ tài khoản gửi Bitcoin xác nhận bằng một khóa cá nhân, mạng lưới sẽ không thấy khóa cá nhân nhưng có thể kiểm tra khóa cá nhân được cấp quyền gửi bitcoin đã sử dụng ở trên. Khối tiếp theo này còn chứa mã băm của khối trước: 0000641727781545e50c0235823c9ae0785d419499cc5a5dcdff2332a53f0f7f

Số "Nonce" đây là số chỉ được sử dụng 1 lần, cũng sẽ có trong mã băm. Số này sẽ là đáp án cho mảnh ghép mà một thợ đào phải giải để bổ sung được một khối hợp lệ trên Blockchain và nhận được phần thưởng.

Mã băm 1 = 0000ed29ee4097b79e194adb355b18c500a900ffb3a1670dec4673eac2abdd07

Khối 2:

Với nội dung:

"B gửi A 3 bitcoin, C gửi A 5 bitcoin"

Khối giao dịch thứ 3 sẽ chứa các giao dịch đã được xác nhận phía trước, cùng với mã băm khối trước đó và tham số Nonce.

Mã băm 2 = 0000d5cada28a39cb0511cc871d550fe0c4ba704a93ad33db378936c6ab40caf

Khối 3:

Khối giao dịch thứ 4 này sẽ chứa các giao dịch đã được xác nhận trước và mã băm của khối trước đó cùng với tham số Nonce:

"A gửi C 10 bitcoin, B gửi C 5 bitcoin"

Mã băm 3 = 00001bbd6491304360d142bd5f32610214937c263b0bc6c44b3ac04574b62d4c

- Tạo Blockchain

Từ ví dụ trên, có 4 mảnh dữ liệu hay giao dịch đã được chuyển về mã băm. Lúc này có thê thêm các mã băm đó vào các khối, tạo thành 1 Blockchain liên kết với nhau. Khối đầu tiên trên Blockchain có mã băm như mã băm ở khối 0. Đây là khối nguyên thủy, không tồn tại khối trước đó trên Blockchain mà khối này cần liên kết. Khối thứ 2 trên Blockchain là khối 1 và sẽ liên kết với mã băm của khối nguyên thủy. Cứ như thế có:

Khối 0- nguyên thủy: Mã khối 0

Khối 1: Mã băm khối 0, mã băm khối 1

Khối 2: Mã băm khối 1, mã băm khối 2

Khối 3: Mã băm khối 2, mã băm khối 1

Bên trên là ví dụ cho việc tạo lên Blockchain. Tức mỗi nhóm giao dịch sẽ được chuyển thành mã băm, kết hợp với mã băm khối trước đó và một bộ số mà các thợ đào giải được để tạo lên khối mới trong chuỗi. 

- Thay đổi Blockchain

Như đã thấy trong ví dụ trên, việc tạo mã băm, mọi thay đổi nhỏ trong giao dịch sẽ tạo ra mã băm hoàn toàn mới. Vì vậy mã khi thay đổi dù chỉ 1 giao dịch không chỉ mã băm thay đổi, mà khối ngay sau đó, mang mã băm cũ cũng phải thay đổi phần đầu, tiếp đó khối sau cũng phải thay đổi phần đầu. Tình trạng này sẽ tiếp tục xảy ra lần lượt tới khối mới nhất trong Blockchain cho đến khi toàn bộ mã băm của các khối đều đã thay đổi. Điều này rất khó xảy ra, vì vậy mà hành vi gian lận bằng cách thay đổi giao dịch trong khối trước là gần như không thể.

- Xác thực trên Blockchain

Với Blockchain Bitcoin, cứ 10 phút sẽ có 1 khối mới được thêm vào. Với nhiều Blockchain khác có thể nhanh hơn. Để thay đổi một giao dịch trong 1 khối đòi hỏi mỗi khối được đào lại bằng mã băm mới nhanh hơn tốc độ toàn bộ mạng lưới đang thêm khối.

Điều này là có thể nếu như đó là khối vừa mới thêm vào, nhưng thường cứ 6 khối thêm vào 1 khối trước đó, việc thay đổi giao dịch trong khối này về mặt tính toán dường như không thể. và 6 khối phía trên này sẽ là 6 xác nhận đồng thời đưa ra đủ độ tin cậy để biết rằng khối giao dịch trước 6 khối này sẽ không bị sửa đổi hay đảo chiều.

- Chỉ tiêu độ khó trên mạng lưới Bitcoin

Như ở vị dụ trên, thấy các mã băm có các số 0 đằng trước. Một khối chỉ có thể được thêm vào Blockchain nếu mã băm thấp hơn băm chỉ tiêu của mạng lưới. Con số chỉ tiêu này càng thấp thì độ khó để thêm 1 khối vào càng tăng lên. Vì vậy trong thực tế, khi số người tham gia tăng lên, con số chỉ tiêu sẽ giảm xuống để giữ nguyên tốc độ thêm khối vào Blockchain.

Ví dụ: Mã băm chỉ tiêu là 000005d6b56a8795df89151dckl

thì mã băm chấp nhận được là 000004defsh781gnd780 hoặc 000000067shd562bch

- Khai thác khối

Tham số Nonce là số bao hàm trong khối mã khi được băm nó sẽ sinh ra một mã băm thấp hơn mã chỉ tiêu để được chấp nhận đưa vào Blockchain. Đây chính là mảnh ghép mà các thợ đào phải tìm ra để thêm được 1 khối vào Blockchain và nhận được phần thưởng.

Các thợ đào có thể chọn những giao dịch để thêm vào khối, chọn từ những giao dịch đang chờ được đưa vào. Thông thường, họ sẽ chọn những giao dịch có mức phí cao nhất đi kèm vì như thế thợ đào có thể nhận được số phí đó kèm theo phần thưởng khối nếu họ thêm được một khối vào blockchain. Mã băm sinh ra ngẫu nhiên và không có mỗi liên hệ nào với nội dung dữ liệu. Các thợ đào không biết mã băm cho đến khi họ tạo được mã băm. Họ chỉ có thể thêm được một khối nếu mã băm họ tạo ra thấp hơn mã băm chỉ tiêu của mạng lưới. Để đạt được điều này họ thêm một con số cùng với giao dịch và mã băm liền trước sau đó tạo một mã băm. Mã băm này thỏa mãn, khối sẽ được thêm vào Blockchain. Nếu mã băm cao hơn, họ có thể thay đổi tham số Nonce và thử lại. Không có cách xác định mã băm là gì, vậy mà quá trình tìm Nonce chỉ là ước đoán ngẫu nhiên. Ngay khi con số này được tìm ra, tất cả các máy tình trong mạng lưới có thể thêm số đó vào dữ liệu giao dịch và xác nhận số đó hợp lệ. Con số này khó tìm, nhưng lại dễ kiểm tra có thỏa mãn yêu cầu hay không. 

- Độ bảo mật của mạng lưới Blockchain

Một trong những đặc trưng bảo mật là tất cả các bản sao lưu đều được cập nhật trên toàn mạng lưới. Tức là sẽ không có 1 CSDL tập trung, nơi mà Blockchain có thể bị 1 kẻ xấu thao túng. Mọi người có thể thêm khối, nhưng phải có sự chấp nhận của đa số thành viên trong mạng lưới xác nhận khối đó hợp lệ hay không. Ngay khi nó được chấp nhận, nó sẽ được thêm vào Blockchain, toàn bộ các bản sao lưu trên cả mạng lưới đều sẽ được cập nhật.

- Tấn công quá bán và phân nhánh 

Khi một người dùng kiểm soát trên 50% mạng lưới. Từ đó người này có thể thao túng hệ thống, quyết định giao dịch nào hợp lệ, giao dịch nào không. Toàn bộ mạng lưới sẽ được cập nhật theo ý của người này. Phân nhánh sinh ra từ đây. Khi mà một lượng lớn người dùng không đồng tình với một thay đổi của mạng lưới, thay đổi có thể là giao dịch, khối thêm vào, chắc năng mạng lưới. Việc không đồng quan điểm này khiến Blockchain bị phân nhánh. Một Blockchain mới được phân ra từ Blockchain ban đầu. Điều này cũng đã xảy ra với Etherreum: Ether và Ether Classic là 2 Blockchain riêng rẽ được tạo ra từ Blockchain Ethereum ban đầu.


